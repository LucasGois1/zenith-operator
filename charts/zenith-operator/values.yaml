profile: standard

global:
  kubernetesVersion: "1.33.0"

installStack: true

tekton:
  enabled: true
  version: "v0.68.0"
  # Note: Tekton Tasks (git-clone, buildpacks-phases) are created dynamically
  # by the operator in the Function's namespace. No ClusterTasks are used.

knativeServing:
  enabled: true
  version: "v0.41.2"
  config:
    ingressClass: "gateway-api.ingress.networking.knative.dev"

knativeEventing:
  enabled: true
  version: "v0.41.7"

gatewayAPI:
  enabled: true
  version: "v1.3.0"
  gateway:
    name: "knative-gateway"
    namespace: "knative-serving"
    className: "envoy"

netGatewayAPI:
  enabled: true
  version: "knative-v1.20.0"

envoyGateway:
  enabled: true
  version: "v1.6.0"
  controllerName: "gateway.envoyproxy.io/gatewayclass-controller"

metallb:
  enabled: false
  version: "v0.14.9"
  # The addressPool can be set to "auto" to automatically detect the IP range
  # from the cluster's node IPs, or set to a specific range like "172.18.255.200-172.18.255.250"
  # 
  # When set to "auto" (default for kind clusters):
  #   - The installer Job will detect the first node's InternalIP
  #   - It will calculate the pool as <first-two-octets>.255.200-<first-two-octets>.255.250
  #   - Example: If node IP is 172.19.0.2, pool becomes 172.19.255.200-172.19.255.250
  #
  # For manual configuration:
  #   - Set to a specific range matching your cluster's network
  #   - For kind: docker network inspect kind -f '{{range .IPAM.Config}}{{.Subnet}}{{end}}'
  addressPool: "auto"

dapr:
  enabled: false
  version: "1.14.0"
  repository: "https://dapr.github.io/helm-charts/"

opentelemetry:
  enabled: true
  version: "v0.140.0"
  repository: "https://open-telemetry.github.io/opentelemetry-helm-charts"
  jaeger:
    enabled: true  # Enable Jaeger for trace visualization (recommended for development)

registry:
  enabled: true
  image:
    repository: registry
    tag: "2"
    pullPolicy: IfNotPresent
  storage:
    size: "10Gi"
    storageClass: ""  # Use default StorageClass
  service:
    type: NodePort
    port: 5000
    nodePort: 30500
  hostname: "registry.registry.svc.cluster.local"

operator:
  image:
    repository: ghcr.io/lucasgois1/zenith-operator
    tag: ""  # Defaults to Chart.AppVersion
    pullPolicy: IfNotPresent

  replicaCount: 1

  serviceAccount:
    create: true
    annotations: {}
    name: ""

  podAnnotations: {}

  podSecurityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault

  securityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
      - "ALL"

  resources:
    limits:
      cpu: 500m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 64Mi

  nodeSelector: {}

  tolerations: []

  affinity: {}

  imagePullSecrets: []

  controller:
    # Insecure registries that the operator should trust for image builds.
    # These are passed to buildpacks via CNB_INSECURE_REGISTRIES.
    # Default includes the in-cluster registry addresses for kind/local development.
    insecureRegistries:
      - "registry.registry.svc.cluster.local:5000"
      - "127.0.0.1:30500"
      - "localhost:30500"

preflight:
  enabled: true
  checks:
    rbac: true
    kubernetesVersion: true
    storageClass: true
    nodeResources: true

hooks:
  preInstall:
    weight: -5
  postInstall:
    weight: 0

namespaceOverride: ""

nameOverride: ""
fullnameOverride: ""
